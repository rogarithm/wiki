---
layout  : wiki
title   : 
summary : 
date    : 2022-08-30 14:26:04 +0900
updated : 2022-08-31 01:12:37 +0900
tags    : 
toc     : true
public  : true
parent  : infra
latex   : false
---
* TOC
{:toc}

# 

## CI/CD?
프로그램에 새로운 기능을 추가하려면 일단 소스를 변경해야 한다. 그리고나서 통합해야 한다. 기능을 추가한 개발자 자리에서 변경된 프로그램이 문제없이 작동하더라도, 다른 개발자 자리, 사용자 기기에서도 문제 없이 작동할거라는 걸 확신하려면 컴파일이 되는지, 빌드가 되는지, 프로그램을 다양한 수준에서 테스트하는 테스트를 통과하는지 확인해야 한다. 개발자가 작업한 것이 문제가 없는지 확신할 수 있을 때까지 이러한 검증 과정을 거친다.

CI(continuous integration)과 CD(continuous delivery)는 이러한 과정이 어떠한 작은 변화에도 적용되어 확신을 가지고 제품을 사용자에게 제공할 수 있는지에 대한 것이다.

## CI(Continuous Integration)의 정의

애플리케이션 사용자의 요구사항이 생기면 이를 구현하기 위해 소스를 변경한다. 소스를 변경하고 나면 변경 사항을 커밋해서 애플리케이션 저장소에 있는 소스를 업데이트한다. 이때 변경된 소스가 기존 소스에 병합되었을 때 충돌을 일으키지는 않는지, 문제 없이 빌드되는지, 테스트를 통과하는지를 확인해야 한다. 이와 같은 작업이 통합(integration)이다.

CI는 정기적으로 새로운 코드 변경 사항이 빌드 및 테스트되어 공유 저장소에 통합되도록 하는 것을 말한다. 또한 CI는 이러한 통합 작업을 자동화해서 여러 사람이 기존 애플리케이션 소스를 자주 변경하더라도 애플리케이션 소스에 빠르게 변경 사항을 반영할 수 있도록 한다.

## CD(Continuous Delivery)의 정의

CI를 통해 통합된 새로운 버전의 애플리케이션 소스를 지속적으로 사용자에게 배포할 수 있는 상태로 만들고, 이렇게 하는 데 필요한 작업을 자동화하는 것을 말한다.

## CI/CD를 왜 사용하는가?
- 리스크를 줄이기 위해서. 제품에 적용해야 할 변화가 크면 클 수록, 그 과정에서 문제가 생길 가능성이 커진다. 반면 적용해야 할 변화가 작으면 작을수록, 잘못될 가능성은 작아진다. 문제가 생겼더라도 그 문제가 작다면 원인을 찾기도, 고치기도 수월하다. 최악의 경우에도, 전 버전으로 롤백하면 된다. CI/CD를 적용하면 더 자주 통합하고 배포 가능한 상태로 만들기 때문에 문제가 생기더라도 리스크가 상대적으로 작다.

- 개발자가 변경한 것이 실제로 어떤 영향을 주는지를 일찍 확인할 수 있다.

- 사용자 피드백을 얻을 수 있다. 좋은 피드백이든 나쁜 피드백이든, 변경한 기능을 사용자가 사용해보고 피드백을 준다면, 그 피드백을 가지고 제품을 어떤 방향으로 개발해나갈지 결정하는 데 사용할 수 있다.

## continuous delivery vs continuous deployment
continuous deployment는 사용자에게 배포하는 단계까지를 포함한다. 반면 continuous delivery는 배포할 수 있는 (staging) 상태까지를 포함한다.

## CI 체크항목
- 하루에 적어도 한 번씩 메인 브랜치에 커밋하는가?
- 테스트 모음이 있는가? 제품에 적용하기 전에 테스트를 하는가? 테스트를 통과했다면 문제 없이 통합될 수 있을 거라는 확신을 주는가?
- 제품에 적용하기까지의 파이프라인에 문제가 생기면 10-20분 안에 고칠 수 있는가?

## 참고 자료
https://www.youtube.com/watch?v=aoMfbgF2D_4
https://artist-developer.tistory.com/24
https://www.youtube.com/watch?v=sIPU_VkrguI

## 더 볼 자료
https://martinfowler.com/articles/originalContinuousIntegration.html
https://martinfowler.com/articles/continuousIntegration.html
