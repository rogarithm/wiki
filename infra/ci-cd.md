---
layout  : wiki
title   : 
summary : 
date    : 2022-08-30 14:26:04 +0900
updated : 2022-08-30 15:29:48 +0900
tags    : 
toc     : true
public  : true
parent  : infra
latex   : false
---
* TOC
{:toc}

# 

## CI/CD?
프로그램에 새로운 기능을 추가하려면 소스를 변경해야 한다. 변경을 적용한 새로운 버전의 프로그램을 만들려면 통합이 필요하다. 기능을 추가한 개발자 자리에서 기능이 추가된 프로그램이 문제없이 작동하더라도, 다른 개발자 자리, 사용자 기기에서도 마찬가지인지는 아직 알 수 없다.

그렇기 때문에 다양한 수준의 테스트를 한다. 컴파일이 되는가, 단위 테스트를 통과하는가, 통합 테스트를 통과하는가, 변경을 적용하면 프로그램 성능이 떨어지지는 않는지 성능 테스트도 할 수 있다. 개발자가 작업한 것이 문제가 없고 좋은 변화를 주는지 확신할 수 있을 때까지 하고, 이러한 테스트를 합쳐서 배포 파이프라인이라고 한다.

continuous delivery는 이러한 과정이 어떠한 작은 변화에도 적용되어 확신을 가지고 제품을 사용자에게 제공할 수 있는지에 대한 것이다.

자동화할 요소들은 빌드, 배포, 테스트가 있다.

## CI/CD를 왜 사용하는가?
- 리스크를 줄이기 위해서. 제품에 적용해야 할 변화가 크면 클 수록, 그 과정에서 문제가 생길 가능성이 커진다. 반면 적용해야 할 변화가 작으면 작을수록, 잘못될 가능성은 작아진다. 문제가 생겼더라도 그 문제가 작다면 원인을 찾기도, 고치기도 수월하다. 최악의 경우에도, 전 버전으로 롤백하면 된다.

- 개발자가 변경한 것이 실제로 어떤 영향을 주는지를 반영한다. 실제와 완전히 동일하진 않겠지만, 개발자가 자기 자리에서 작동하는 것을 보고 "다 됐어요" 라고 말하는 것 보다는 더 실제와 비슷할 것이다.

- 사용자 피드백을 얻을 수 있다. 좋은 피드백이든 나쁜 피드백이든, 변경한 기능을 사용자가 사용해보고 피드백을 준다면, 그 피드백을 가지고 제품을 어떤 방향으로 개발해나갈지 결정하는 데 사용할 수 있다.

## CD의 정의
Continuous Delivery. CI를 통해 통합된 애플리케이션 소스를 지속적으로 새로운 버전의 애플리케이션을 사용자에게 배포할 수 있는 상태로 만드는 것.

## continuous delivery vs continuous deployment
continuous deployment는 계속해서 새로운 기능을 추가해야 하는 것이고, continuous delivery는 계속해서 새로운 기능을 추가할 수 있는 것이다. delivery일 경우, 회사의 정책이 매 2주마다 새로운 기능을 추가하는 것이라고 한다면, 매일 하는 것은 아니다. 하지만 만약 회사에서 원한다면 그렇게 할 수 있는 확신을 가지고 있다.

## CI의 정의
Continuous Integration. 새로운 코드 변경 사항이 정기적으로 빌드 및 테스트되어 공유 저장소에 통합되는 것을 뜻한다.

애플리케이션 사용자의 요구사항이 생기면 소스를 추가하거나 변경해서 요구사항을 들어준다. 소스를 변경하면 변경 사항을 커밋해서 애플리케이션 소스 저장소에 있는 소스의 버전 업데이트를 한다. 이때 변경된 소스가 기존 소스에 병합되었을 때 충돌을 일으키지는 않는지, 문제 없이 빌드되는지, 테스트를 통과하는지를 확인해야 한다. CI는 이러한 작업을 자동화해서 여러 사람이 기존 애플리케이션 소스를 자주 변경하더라도 애플리케이션 소스에 빠르게 변경 사항을 반영할 수 있도록 하는 작업이다.


## CI 체크항목
- 하루에 적어도 한 번씩 메인 브랜치에 커밋하는가?
- 테스트 모음이 있는가? 제품에 적용하기 전에 테스트를 하는가? 테스트를 통과했다면 문제 없이 통합될 수 있을 거라는 확신을 주는가?
- 제품에 적용하기까지의 파이프라인에 문제가 생기면 10-20분 안에 고칠 수 있는가?

## 참고 자료
https://www.youtube.com/watch?v=aoMfbgF2D_4
https://artist-developer.tistory.com/24
https://www.youtube.com/watch?v=sIPU_VkrguI

## 더 볼 자료
https://martinfowler.com/articles/originalContinuousIntegration.html
https://martinfowler.com/articles/continuousIntegration.html
