---
layout  : wiki
title   : 
summary : 
date    : 2022-08-23 20:47:15 +0900
updated : 2022-08-23 20:47:19 +0900
tags    : 
toc     : true
public  : true
parent  : 
latex   : false
---
* TOC
{:toc}

# process vs thread
우테코의 [10분 테코톡 코다의 Process vs Thread 발표](https://www.youtube.com/watch?v=1grtWKqTn50&list=PLBi0c8UEHcTnUsLoK3PD8cjKU8DIo4rYc&index=6&ab_channel=%EC%9A%B0%EC%95%84%ED%95%9CTech)를 보고 정리한 내용이다

## 사전 정의
###
- 실행 단위는 프로세스와 스레드를 포괄하는 개념이다. 한 CPU core에 한순간에 한개씩 적재되는 것을 가리킨다. 따라서 실행단위가 스레드일 때도 있고, 프로세스일 때도 있다.
- (부연 설명 없는) 프로세스는 스레드 하나만 가지고 있는 프로세스를 말한다. 즉 스레드와 프로세스가 완전히 다른 것이 아니다.
- 동시성은 한순간에 여러 가지 일이 아니라, 짧은 전환으로 여러 가지 일을 동시에 처리하는 것처럼 보이는 것을 말한다.

## process vs program
###
- 프로세스는 프로그램이 실행할 수 있는 상태가 된 것이다.
- 프로그램은 우리가 구현하는 코드 파일이다. 프로세스는 실행할 수 있는 상태의 프로그램이다.

###
- 프로그램이 프로세스가 되려면 두 가지가 완료되어야 한다.
- 1) 프로세스가 필요로 하는 재료들이 메모리에 올라가야 한다. 다음 네 가지가 재료를 구성한다.
  + code: 실행 명령을 포함하는 코드들
  + data: static 변수 혹은 global 변수
  + heap: 동적 메모리 영역
  + stack: 지역변수, 매개변수, 반환 값 등등 일시적인 데이터
-  2) 해당 프로세스에 대한 정보를 담고 있는 PCB 블럭이 프로세스 생성 시 함께 만들어져야 한다.

## process vs thread
###
나는 컴퓨터로 글을 쓸 때 여러 앱을 동시에 켜놓는다. 음악을 들을 아이튠즈, 자료를 조사할 크롬, 문서를 작성할 textEdit 등등.<br>
대부분 사람들은 작업을 할 때 하나의 앱만 켜놓기보단 여러 앱을 동시에 사용하고 싶어한다. 하지만 한 프로세스가 실행되기 위해서<br>
CPU를 점유하고 있으면 다른 프로세스는 실행 상태에 있을 수 없다. 그런 경우 아이튠즈로 노래를 듣다가 글을 쓰려고 textEdit 앱을 키면<br>
노래가 꺼지게 된다. 하지만 우리가 작업할 때 그런 일은 일어나지 않는다. 물론 CPU를 점유할 수 있는 프로세스의 수는 여전히 하나다.<br>
대신 다수의 프로세스를 동시에 실행하기 위해 여러 개의 프로세스를 시분할로, 즉 짧은 텀을 반복하면서 전환해서 실행시키도록 한다.<br>

###
프로세스가 여러 개일 때, 프로세스 시분할은 다음과 같이 일어난다.
- 프로세스가 실행되려면, 그 프로세스의 PCB 블럭이 CPU에 적재되어야 한다.
- 실행 중인 프로세스 이외의 프로세스는 준비 상태이다.
- 다른 프로세스가 실행되기 위해 실행 중이던 프로세스의 PCB 블록은 CPU 적재 상태로부터 해제되어 준비 상태로 바뀌고, 실행하고자 하는 프로세스의 PCB 블록이 CPU에 적재되어 해당 프로세스가 실행 상태가 된다.
- 실행 중인 프로세스를 변경할 때 일어나는 과정을 컨텍스트 스위칭이라고 한다.

###
- 스레드는 프로세스의 경량화된 버전이다.
- 하나의 프로세스 안에 다수의 스레드가 있을 때 공유되는 자원(부모 프로세스의 code, data, heap 영역)이 있다.
- 공유 자원이 있기 때문에 스레드가 여러 개가 되더라도 이를 유지하기 위한 메모리가 (프로세스 여럿을 유지하기 위한 경우보다) 적다.

## multi-process & multi-thread
두 개념 모두 한 애플리케이션에 대한 처리 방식의 일종이다.

###
multi-process는 어떤 프로세스로부터 새로운 프로세스를 fork()해서 여러 프로세스를 만들어낸다. 다음과 같은 특징이 있다.
- 각 프로세스가 서로 독립적이다
- 프로세스간 통신하기 위한 비용이 크다
- 프로세스간 공통 자원이 없으므로 메모리가 많이 필요하다
- 프로세스 변경 시 변경한 프로세스가 필요로 하는 재료(code, data, heap, stack)가 전부 메모리에 새로 올라가야 하므로 컨텍스트 스위칭 비용이 크다
- 프로세스간 공유하는 자원이 없으므로 동기화 작업이 필요 없다

###
multi-thread는 스레드간 code, data, heap를 공동으로 사용하고 stack만 각자 갖는다. 다음과 같은 특징이 있다.
- 각 스레드가 서로 연결되어 있다
- 스레드간 통신하기 위한 비용이 적다
- 스레드간 공통 자원이 있으므로 메모리가 적게 필요하다
- 스레드간 변경 시 변경한 프로세스가 필요로 하는 재료 중 많은 부분(code, data, heap)이 이미 메모리에 올라가 있으므로 컨텍스트 스위칭 비용이 적다
- 스레드간 공유하는 자원이 있으므로 동기화 작업이 필요하다

###
항상 multi-thread가 좋을 것 같지만, 한 스레드에 문제가 생겼을 때 전체 프로세스에 영향이 가는 단점이 있다. 예를 들어 인터넷 익스플로러는 multi-thread 방식인데, 탭 하나에 오류가 나면 전체 탭에 영향을 준다. 반면 multi-process는 한 프로세스에 오류가 생기더라도 다른 프로세스에 영향이 없다. 예를 들어 구글 크롬은 multi-process 방식이어서 탭 하나에 오류가 생겨도 다른 탭에 영향을 끼치지 않는다.

## multi-core
###
single-core는 동시성(concurrency) 방식으로 여러 프로세스를 처리한다.
하나의 코어에서 하나 이상의 프로세스(혹은 스레드)가 번갈아 가면서 실행되지만, 그 과정이 매우 빠르기 때문에 우리 눈에는 동시에 실행되는 것처럼 보인다.
###
multi-core는 병렬(parallelism) 방식으로 여러 프로세스를 처리한다.
둘 이상의 코어에서 동시에 하나 이상의 프로세스(혹은 스레드)가 한꺼번에 실행된다.
