---
layout  : wiki
title   : 
summary : 
date    : 2022-08-23 17:30:51 +0900
updated : 2022-08-23 17:31:11 +0900
tags    : 
toc     : true
public  : true
parent  : 
latex   : false
---
* TOC
{:toc}

# 

## 
###
이런 url이 있다고 가정하자. http://www.naver.com/359?id=sehunkim
- 여기서 url의 역할을 다음과 같이 나눌 수 있다. 프로토콜(http), 서버 이름(www.naver.com), 경로(359), 쿼리 문자열(id=sehunKim)

###
- 브라우저는 어느 서버에 웹페이지를 요청할지를 서버의 IP 주소로 명시할 수 있다.
- IP 주소 대신 도메인 이름으로 웹페이지를 요청할 수 있다. 이 경우 먼저 도메인 이름 서버(DNS, Domain Name Server)에 도메인 이름에 해당하는 IP 주소를 요청한다.
- 웹 서버에 IP 주소에 해당하는 웹페이지를 요청하면 웹 서버는 웹페이지를 줌으로써 응답한다.

###
- 서버에서 실행하는 프로그램마다 포트가 다르다.
- 왜 포트가 다른가? 웹 서버 프로그램은 웹 페이지를 제공한다. 하지만 웹 페이지를 제공하는 것 이외에도 서버가 제공하는 서비스가 있을 수 있다. 예를 들어 스트리밍 서버 프로그램은 스트리밍 서비스를 제공하고, 채팅 서버 프로그램은 채팅 서비스를 제공한다.
- 여러 서버 프로그램이 서버에 있을 때, IP 주소만으로는 어떤 서버 프로그램을 연결하려고 하는지 알기 어렵다. 그래서 각 서버 프로그램은 클라이언트가 연결할 때 다른 서버 프로그램과 구분할 수 있도록 포트를 사용한다.
- 클라이언트는 IP 주소와 함께 포트 번호를 사용해서 원하는 서버 프로그램에 연결하게 된다. 클라이언트가 서버의 IP 주소에 더해 포트 번호를 명시하면, 그 포트에 해당하는 서버 프로그램에 연결한다.

###
- 웹 프로그래밍이란 웹 서버가 웹 브라우저에 응답으로 전송할 데이터를 생성해주는 프로그램을 작성하는 것이다.

###
- 요청 데이터의 헤더는 서버가 응답을 생성하는데 참조할 수 있는 정보이고, 응답 데이터의 헤더는 응답에 대한 정보다.


## 톰캣
###
- 톰캣은 JSP를 실행할 수 있는 서버 프로그램이다. 또한 JSP를 실행하기 위한 웹 컨테이너다.
- 어플리케이션을 구현하려면 여러 기능이 필요하다. 웹 연결, 프로그래밍 언어, 데이터베이스 연동 등이 그 예다. 톰캣은 이러한 기능을 제공(serve)한다. 그래서 톰캣과 같은 서버 프로그램을 웹 어플리케이션 서버(WAS, Web Application Server)라고도 부른다.
- WAS는 클라이언트의 요청이 오면 알맞은 (이를테면 JSP로 만든) 프로그램을 실행하고, 프로그램의 실행 결과를 응답으로 전송한다.

###
- JSP 파일을 실행할 때마다 매번 다른 결과가 표시되는데, 이것은 그때마다 톰캣이 JSP를 매번 실행하기 때문이다.


## JSP
###
JSP는 Java Server Pages의 준말이다.

### 용도
- JSP는 웹 프로그래밍을 할 때 사용되는 기술이다. html 응답을 생성하는데 필요한 기능을 제공한다.
  + 여기서 웹 프로그래밍이란 웹 서버가 웹 브라우저에 응답으로 전송할 데이터를 생성해주는 프로그램을 작성하는 것을 말한다.
- JSP는 동적 페이지를 만드는 데 사용되는 프로그래밍 기술이다.
  + 동적 페이지는 파일을 변경하지 않아도 시간이나 특정 조건에 따라 응답 데이터가 달라지는 페이지를 말한다.
  + 동적 페이지 생성 예를 들면, 날짜를 출력하는 JSP 프로그램은 코드가 바뀌지 않아도 조건(현재 시간)이 바뀌면 응답 데이터(출력되는 시간)가 달라진다.
  + 동적 페이지와 반대로, 정적 페이지는 파일(코드)을 바꾸지 않으면 응답 데이터가 같은 페이지를 말한다.

### 구성
- html 문서를 생성하는 JSP 코드의 구성은 크게 설정 부분과 응답 생성 부분으로 나뉜다.
- 설정 부분에서는 JSP 페이지에 대한 정보를 입력한다. 이런 정보에는 생성할 문서의 타입(html 등), 인코딩 등이 있다.
- 설정 부분의 큰 요소를 디렉티브라고 부르고, 디렉티브마다 속성과 값을 여러 개 가질 수 있다.
- 예를 들어 contentType 속성에 넣은 값은 JSP 문서의 타입을 지정하고, contentType에 JSP가 생성할 문서의 MIME 타입을 입력하므로 JSP 문서의 타입은 MIME 타입과 같다.
  + MIME 타입은 HTTP 등의 프로토콜에서 응답 데이터의 내용을 설명한다.
- JSP 파일을 읽을 때는 page 디렉티브의 pageEncoding 속성과 contentType 속성을 사용해서 캐릭터 인코딩을 결정한다. pageEncoding 속성은 JSP 파일의 인코딩을 결정하고, contentType 속성의 charset은 응답 결과의 인코딩을 결정한다.
- 생성 부분에서는 HTML 문서를 생성한다. 이 부분은 HTML 태크, <% ... %> 형태의 스크립트 코드 등으로 구성된다.
- JSP에서 자바 문법을 쓸 수 있다. 이것을 표현 언어로 간결하게 표현할 수 있다.

####
- 웹 브라우저는 서버에 요청 파라미터를 전송할 수 있다. 요청 URL을 처리할 웹 프로그램은 웹 브라우저가 전송한 요청 파라미터를 이용해서 알맞은 기능을 구현해야 한다.
- **의문점** 파라미터를 전송할 수 있는 html 태그 종류가 따로 있나?

####
- 캐시는 응답 결과를 저장하는 로컬 PC의 임시 저장소다. 변경이 발생하지 않는 응답 정보는 캐시에 저장해 사용함으로써 더 빠르게 그 결과를 출력할 수 있다.
- response 기본 객체에서 응답 결과를 캐시 할 것인지 여부를 설정할 수 있다.

### 처리 과정
####
- JSP 페이지를 요청하면 JSP를 직접 실행하지 않는다. JSP로부터 몇 단계를 거쳐 만들어진 서블릿 클래스를 실행하는 것이다.
- 서블릿 클래스는 JSP를 자바 소스 코드로 변환한 뒤 컴파일해서 만들어진다.

####
- JSP 페이지는 버퍼를 사용한다. 응답 결과를 버퍼에 저장했다가 버퍼가 다 차면 한꺼번에 웹 브라우저에 전송한다.
- 버퍼를 사용하면 여러 장점이 있다.
  + 데이터 전송 성능이 향상된다.
  + 버퍼가 다 차기 전까지 헤더를 변경할 수 있다.
  + JSP 실행 중 에러가 발생할 경우 대처할 수 있다. JSP 실행 도중 버퍼를 비우고 새로운 내용을 전송할 수 있기 때문이다.


## 쿠키
###
- 쿠키는 웹 서버와 웹 브라우저 양쪽에서 생성할 수 있다. JSP에서는 쿠키를 웹 서버에서 생성한다.
- 서버에서 쿠키를 생성하면 브라우저에 응답으로 넘겨주고, 브라우저는 쿠키를 저장한다. 이후 쿠키 유효 기간이 만료되기 전까지, 브라우저에서는 요청을 보낼 때마다 서버에 쿠키를 같이 보낸다.
- 쿠키는 만료 전까지 서버와 클라이언트의 통신시 전달되기 때문에 쿠키에 서버와 공유해야 할 정보를 저장하여 활용할 수 있다.
- 예를 들어 서버가 수행하는 작업에 필요한 값(207p 첫 문단) 아이디 값을 쿠키에 저장할 수 있고, 아이디 기억하기 기능을 구현하는 데 쓸 수도 있다. (220p)


## 세션
###
- 세션은 서버에 값을 저장한다.
- 서버는 세션을 사용해서 클라이언트 상태를 유지할 수 있다.
- 웹 컨테이너는 웹 브라우저 하나마다 세션을 생성한다. 웹 컨테이너 안에 JSP가 여러개 있을 때, 같은 브라우저면 다른 JSP를 실행하더라도 같은 세션을 사용한다.
- 웹 애플리케이션을 실행하는 동안 지속적으로 관리하는 데이터의 저장소로 세션을 사용할 수 있다.
- 쿠키는 웹 브라우저와 서버 사이에 공유되는 반면 세션은 서버에만 저장된다. 그래서 세션은 쿠키보다 보안 면에서 유리하다.
- 같은 웹 브라우저라도 서로 다른 웹 애플리케이션이 있으면 애플리케이션마다 독립된 세션이 생긴다. 즉 서로 다른 웹 애플리케이션은 세션을 공유하지 않는다.

### 의문점
- 웹 사이트는 웹 어플리케이션인가? 그렇다면 naver와 daum은 별개의 웹 어플리케이션으로 볼 수 있나?
- 브라우저 하나에서 naver, daum에 로그인한다고 할 때 한 세션에 로그인 상태를 기록해두나?
  + 그러려면 세션마다 로그인 데이터를 저장할 수 있는 수단이 여러 개여야 할 것 같다.
  + 만약 로그인 데이터를 저장할 수 있는 속성이 하나라면, 브라우저 하나에 세션이 여러 개여야 할 것이다. 그래야 각 세션마다 naver, daum 사이트 각각에 대한 로그인 정보를 하나씩 담을 수 있을 테니까.


## 데이터베이스
###
- JDBC는 Java Data Base Connectivity의 준말이다.
- 테이블은 관계형 데이터베이스 관리 시스템에서 데이터를 저장하는 장소다.
- 테이블 스키마는 테이블의 구조와 관련된 정보다. 이러한 정보에는 테이블에 저장되는 데이터의 종류, 길이 등이 있다.
- 테이블에서 가로줄 하나에 각 칼럼 데이터 하나씩 들어가는 것을 레코드라고 한다.
- 테이블 안 레코드를 구별하는 데 주요키와 인덱스를 사용한다. 주요키는 레코드마다 서로 다른 값을 가지기 때문에 모든 레코드 각각을 구별하는 데 주요키를 사용할 수 있다. 인덱스는 일정한 기준에 따라 데이터의 순서를 미리 정렬한다. 이를 통해 데이터의 위치를 빨리 찾을 수 있다. 레코드의 특정 칼럼을 기준으로 삼아 인덱스를 만든다.

###
- 데이터베이스 프로그래밍을 하기 위해서는 먼저 DBMS 클라이언트(데이터베이스를 사용하는 애플리케이션)와 데이터베이스를 연결하는 과정이 필요하고, 작업 후엔 연결을 해제해야 한다.

### 트랜젝션
- 실행해야 할 쿼리가 여러 개 있고, 이 모든 쿼리가 정상적으로 완료되어야 문제가 생기지 않을 경우가 있다.
- 트랜젝션은 이러한 쿼리를 실행할 때 모든 쿼리가 성공한 때에만 DB에 결과를 적용시킨다. 이것을 트랜젝션을 커밋한다고 한다.
- 만약 중간에 실패하는 쿼리가 있으면 DB에 결과를 적용하지 않는다. 이것을 트랜젝션을 롤백한다고 한다.
- 트랜젝션이 보장되면 데이터의 신뢰성이 높아진다.

#### 참고자료 – 최범균의 JSP 2.3 웹 프로그래밍
