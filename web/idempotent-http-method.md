---
layout  : wiki
title   : 
summary : 
date    : 2022-08-30 22:03:56 +0900
updated : 2022-08-31 16:39:09 +0900
tags    : 
toc     : true
public  : true
parent  : [[web]]
latex   : false
---
* TOC
{:toc}

# 

## 멱등성의 정의
- 같은 연산을 여러번 실행하더라도 같은 결과가 보장되는 것을 멱등성이라고 한다.

## HTTP 메서드의 멱등성
- HTTP 메서드는 클라이언트가 서버에서 리소스에 대해 수행해주길 바라는 동작이다. 이러한 동작에는 리소스를 클라이언트에 보여주거나, 리소스를 서버에 업로드하거나, 리소스를 서버에서 지우는 것 등이 있다.
- 모든 HTTP 메서드 중 일부가 멱등성을 갖는다. 만약 어떤 메서드를 여러번 실행하더라도 같은 결과가 보장된다면 그 메서드가 멱등성을 갖는다고 할 수 있다. 여기서 같은 결과가 보장된다는 말은, 메서드 실행 후에도 서버의 상태가 같다는 말이다. PUT 메서드와 DELETE 메서드를 예로 들면:
  * PUT 메서드는 요청에 담긴 내용으로 주어진 리소스를 통째로 덮어쓴다. PUT 메서드를 몇 번 실행하던지, PUT 메서드 실행 전에 리소스의 상태(서버의 상태)가 어떠했던지와 관계 없이 리소스 내용이 요청 내용으로 바뀌는 것이 동일하다.
  * DELETE 메서드는 서버에서 문서를 제거한다. 이전에 문서가 있었거나, 문서가 (DELETE 메서드가 이미 실행되어) 없던지와 관계 없이 DELETE 메서드 실행 후 해당 문서가 제거된 상태(서버의 상태)는 동일하다.
- 여러번 메서드를 실행했을 때 HTTP 응답 상태가 다르더라도 서버의 상태가 같다면 그 메서드는 멱등성을 갖는다고 할 수 있다.

## HTTP 메서드의 멱등성은 왜 중요한가?
- 예상치 못한 동작을 방지할 수 있다. 네트워크는 불완전한 속성을 가지고 있다. 클라이언트가 서버에 요청을 보내고, 서버에서 요청을 처리한 후 다시 클라이언트에 응답하는 과정에서 데이터가 유실될 수 있는 점이 그중 하나다. 만약 클라이언트가 보낸 요청을 서버에서 처리했지만, 서버가 클라이언트에 응답을 보내는 과정 중 데이터가 유실되었다고 하자. 비록 서버에서 요청을 처리했지만, 클라이언트는 응답을 받지 못하였으므로 그 사실을 모르기 때문에 서버에 같은 요청을 다시 보낼 수 있다. 만약 메서드가 멱등성을 갖지 않는다면 한 번 더 요청함으로써 의도했던 결과와 다른 결과를 낼 수 있다. 멱등성을 갖는 메서드는 이런 상황에서도 같은 결과를 보장할 수 있다.

## 참고 자료
https://hudi.blog/http-method-idempotent/
https://meetup.toast.com/posts/218
