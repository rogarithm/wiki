---
layout  : wiki
title   : 
summary : 
date    : 2022-08-23 20:42:37 +0900
updated : 2022-08-23 20:42:47 +0900
tags    : 
toc     : true
public  : true
parent  : 
latex   : false
---
* TOC
{:toc}

# 
## HTTPS?
- HTTPS는 HTTP에서 secure socket layer가 추가된 것이다. SSL이나 TLS 프로토콜로 세션 데이터를 암호화한다.
- SSL은 공개키 (키가 두 종류인 것) 암호화 방식과 대칭키 (키가 한 종류인 것) 암호화 방식을 함께 사용한다. 이 중 공개키 방식은 대칭키를 전달하는 데 쓰고, 대칭키는 사이트(서버)와 웹 브라우저(클라이언트)가 통신하는 데 쓴다.
- SSL 프로토콜을 적용하기 위해선 인증서를 발급받아 서버에 적용시켜야 한다. 인증서는 사용자가 접속한 서버가 우리가 의도한 서버가 맞는지 보장한다. 웹 브라우저는 인증서를 발급하는 공인인증기관 리스트와 이 기관들의 공개키를 알고 있다.

인증서 발급과 사이트-사용자 통신 과정에서 개인키는 암호화할 때 쓰고, 공개키는 복호화할 때 쓴다.

## 인증서 발급 과정

1. 사이트는 자신의 정보와 공개키를 인증기관에 제공한다.
  + Q1. 여기서 공개키는 사이트와 인증기관 둘 다 동일한 것 맞나?
  + Q2. 만약 맞다면, 굳이 공개키를 인증기관에 제공할 필요가 무엇일까?

2. 인증기관은 데이터 검증 후 개인키로 사이트에서 제출한 정보를 암호화한다. 그리고 인증서를 발급한다.
  + Q3. 암호화한 정보가 인증서인가?
  + Q4. 암호화할 때 사이트에서 제공한 공개키도 같이 암호화하나?
  + (Q1 확인을 위한 공개키쌍 목록 체크) 인증기관과 사이트가 공개키 쌍 중 하나씩을 가지고 있다. 인증기관은 개인키, 사이트는 공개키.

3. 인증기관은 웹 브라우저에게 자신의 공개키를 제공한다. 그래서 웹 브라우저가 암호화된 인증서를 복호화할 수 있도록 한다.
  + Q5. Q1에서 든 의문과 동일한 맥락인데, 여기서 제공하는 공개키는 사이트의 공개키와 동일한 것 맞나?
  + (Q1 확인을 위한 공개키쌍 목록 체크) 이제 인증기관과 웹 브라우저는 공개키를 가지고 있다.

- Q6. 여기서 사이트와 웹 브라우저는 별개가 맞나? 웹 브라우저는 사용자와 동일한 게 맞나?

## 사용자가 사이트에 접속하면 일어나는 과정

1. 사이트는 자신의 인증서를 웹 브라우저(사용자)에 보낸다.

2. 웹 브라우저는 (인증서 발급 3단계에서 미리 받아서) 가지고 있는 인증기관 공개키로 인증서를 복호화해서 검증한다. 그러면 사이트의 정보와 사이트의 공개키를 알 수 있다.
  + -> A for Q3. 인증서는 사이트 정보와 공개키를 암호화한 것이 맞다
  + (Q1 확인을 위한 공개키쌍 목록 체크) 웹 브라우저는 인증기관 공개키와 사이트의 공개키를 가지고 있다.
  + -> **A for Q1. 두 공개키를 가지고 있는 단계가 있는 것으로 보아 인증기관의 공개키와 사이트의 공개키는 서로 다르다.**

3. 웹브라우저는 복호화를 통해 알아낸 사이트의 공개키로 대칭키를 암호화해서 다시 사이트에 보낸다.
  + -> A for Q4. 인증기관이 사이트에서 제출한 정보를 암호화할 때, 사이트에서 제공한 공개키도 같이 암호화한다 

4. 사이트는 웹 브라우저로부터 받은 암호화된 대칭키를 자신이 가지고 있는 개인키로 해독해 대칭키를 얻는다. 이제 웹브라우저와 사이트는 같은 대칭키를 가지고 있으므로 데이터를 주고받을 수 있게 되었다.

- 이후 세션이 종료되면 대칭키는 폐기된다.
